angular.module('ngProgress.provider',['ngProgress.directive']).service('ngProgress',function(){'use strict';return['$document','$window','$compile','$rootScope','$timeout',function($document,$window,$compile,$rootScope,$timeout){this.autoStyle=true;this.count=0;this.height='2px';this.$scope=$rootScope.$new();this.color='firebrick';this.parent=$document.find('body')[0];this.count=0;this.progressbarEl=$compile('<ng-progress></ng-progress>')(this.$scope);this.parent.appendChild(this.progressbarEl[0]);this.$scope.count=this.count;if(this.height!==undefined){this.progressbarEl.eq(0).children().css('height',this.height);}if(this.color!==undefined){this.progressbarEl.eq(0).children().css('background-color',this.color);this.progressbarEl.eq(0).children().css('color',this.color);}this.intervalCounterId=0;this.start=function(){this.show();var self=this;clearInterval(this.intervalCounterId);this.intervalCounterId=setInterval(function(){if(isNaN(self.count)){clearInterval(self.intervalCounterId);self.count=0;self.hide();}else{self.remaining=100-self.count;self.count=self.count+(0.15*Math.pow(1-Math.sqrt(self.remaining),2));self.updateCount(self.count);}},200);};this.updateCount=function(new_count){this.$scope.count=new_count;if(!this.$scope.$$phase){this.$scope.$apply();}};this.setHeight=function(new_height){if(new_height!==undefined){this.height=new_height;this.$scope.height=this.height;if(!this.$scope.$$phase){this.$scope.$apply();}}return this.height;};this.setColor=function(new_color){if(new_color!==undefined){this.color=new_color;this.$scope.color=this.color;if(!this.$scope.$$phase){this.$scope.$apply();}}return this.color;};this.hide=function(){this.progressbarEl.children().css('opacity','0');var self=this;self.animate(function(){self.progressbarEl.children().css('width','0%');self.animate(function(){self.show();},500);},500);};this.show=function(){var self=this;self.animate(function(){self.progressbarEl.children().css('opacity','1');},100);};this.animate=function(fn,time){if(this.animation!==undefined){$timeout.cancel(this.animation);}this.animation=$timeout(fn,time);};this.status=function(){return this.count;};this.stop=function(){clearInterval(this.intervalCounterId);};this.set=function(new_count){this.show();this.updateCount(new_count);this.count=new_count;clearInterval(this.intervalCounterId);return this.count;};this.css=function(args){return this.progressbarEl.children().css(args);};this.reset=function(){clearInterval(this.intervalCounterId);this.count=0;this.updateCount(this.count);return 0;};this.complete=function(){this.count=100;this.updateCount(this.count);var self=this;clearInterval(this.intervalCounterId);$timeout(function(){self.hide();$timeout(function(){self.count=0;self.updateCount(self.count);},500);},1000);return this.count;};this.setParent=function(newParent){if(newParent===null||newParent===undefined){throw new Error('Provide a valid parent of type HTMLElement');}if(this.parent!==null&&this.parent!==undefined){this.parent.removeChild(this.progressbarEl[0]);}this.parent=newParent;this.parent.appendChild(this.progressbarEl[0]);};this.getDomElement=function(){return this.progressbarEl;};this.setAbsolute=function(){this.progressbarEl.css('position','absolute');};}];}).factory('ngProgressFactory',['$injector','ngProgress',function($injector,ngProgress){var service={createInstance:function(){return $injector.instantiate(ngProgress);}};return service;}]);angular.module('ngProgress.directive',[]).directive('ngProgress',["$window","$rootScope",function($window,$rootScope){var directiveObj={replace:true,restrict:'E',link:function($scope,$element,$attrs,$controller){$scope.$watch('count',function(newVal){if(newVal!==undefined||newVal!==null){$scope.counter=newVal;$element.eq(0).children().css('width',newVal+'%');}});$scope.$watch('color',function(newVal){if(newVal!==undefined||newVal!==null){$scope.color=newVal;$element.eq(0).children().css('background-color',newVal);$element.eq(0).children().css('color',newVal);}});$scope.$watch('height',function(newVal){if(newVal!==undefined||newVal!==null){$scope.height=newVal;$element.eq(0).children().css('height',newVal);}});},template:'<div id="ngProgress-container"><div id="ngProgress"></div></div>'};return directiveObj;}]);angular.module('ngProgress',['ngProgress.directive','ngProgress.provider']);